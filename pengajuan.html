<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pengajuan Pinjaman</title>
  <style>
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(135deg, #e0f7fa, #fff);
  margin: 0;
  padding: 30px 20px;
  color: #34495e;
}

h2 {
  text-align: center;
  margin-bottom: 25px;
  color: #2c3e50;
  font-weight: 700;
  letter-spacing: 1px;
  text-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.container {
  max-width: 1000px;
  margin: auto;
  background: #ffffffcc; /* sedikit transparan */
  padding: 30px 35px;
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
  backdrop-filter: saturate(180%) blur(10px);
}

.form-row {
  display: flex;
  gap: 18px;
  margin-bottom: 18px;
  align-items: center;
  flex-wrap: wrap;
}

.form-row input[type="text"],
.form-row input[type="number"] {
  flex-grow: 1;
  padding: 12px 12px 12px 45px;
  border: 1.8px solid #bdc3c7;
  border-radius: 10px;
  font-size: 1.1rem;
  min-width: 0;
  position: relative;
  background-color: #fafafa;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
  box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
}

.form-row input[type="text"]:focus,
.form-row input[type="number"]:focus {
  outline: none;
  border-color: #3498db;
  box-shadow: 0 0 8px rgba(52, 152, 219, 0.4);
  background-color: #fff;
}

.currency-wrapper {
  position: relative;
  flex: 1 1 220px;
  min-width: 220px;
}

.currency-prefix {
  position: absolute;
  top: 50%;
  left: 14px;
  transform: translateY(-50%);
  font-weight: 700;
  color: #7f8c8d;
  pointer-events: none;
  font-size: 1.1rem;
  user-select: none;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.currency-input {
  width: 100%;
  box-sizing: border-box;
  padding: 12px 45px 12px 38px;
  font-family: inherit;
  font-size: 1.1rem;
  border: 1.8px solid #bdc3c7;
  border-radius: 10px;
  outline: none;
  background-color: #fafafa;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
  box-shadow: inset 0 1px 4px rgba(0,0,0,0.06);
}

.currency-input:focus {
  border-color: #2980b9;
  box-shadow: 0 0 10px rgba(41, 128, 185, 0.5);
  background-color: #fff;
}

.step-buttons {
  position: absolute;
  top: 50%;
  right: 8px;
  transform: translateY(-50%);
  display: flex;
  flex-direction: column;
  height: 32px;
  background: #ecf0f1;
  border-radius: 6px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
}

.step-buttons button {
  border: none;
  background: transparent;
  cursor: pointer;
  font-size: 14px;
  line-height: 12px;
  padding: 0;
  width: 26px;
  height: 16px;
  color: #34495e;
  user-select: none;
  display: flex;
  justify-content: center;
  align-items: center;
  transition: color 0.3s, background-color 0.3s;
  border-radius: 4px;
}

.step-buttons button:hover {
  color: #fff;
  background-color: #3498db;
  box-shadow: 0 2px 6px rgba(52, 152, 219, 0.6);
}

/* Styling tombol utama dan tambahan */

button.add-row,
button.btn-primary,
button.btn-secondary {
  padding: 12px 22px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  display: block;
  margin: 30px auto 0;
  font-size: 1.1rem;
  font-weight: 600;
  min-width: 180px;
  box-shadow: 0 6px 14px rgba(0,0,0,0.15);
  user-select: none;
  transition: background-color 0.35s ease, box-shadow 0.35s ease, transform 0.25s ease;
}

/* Warna tombol tambah baris (hijau) */
button.add-row {
  background-color: #27ae60;
  color: white;
  box-shadow: 0 6px 14px rgba(39, 174, 96, 0.45);
}

button.add-row:hover {
  background-color: #219150;
  box-shadow: 0 10px 20px rgba(33, 145, 80, 0.6);
  transform: translateY(-2px);
}

button.add-row:active {
  transform: translateY(0);
  box-shadow: 0 6px 12px rgba(33, 145, 80, 0.5);
}

/* Warna tombol primary (biru) */
button.btn-primary {
  background-color: #2980b9;
  color: white;
  box-shadow: 0 6px 14px rgba(41, 128, 185, 0.45);
}

button.btn-primary:hover {
  background-color: #1f5f8b;
  box-shadow: 0 10px 20px rgba(31, 95, 139, 0.6);
  transform: translateY(-2px);
}

button.btn-primary:active {
  transform: translateY(0);
  box-shadow: 0 6px 12px rgba(31, 95, 139, 0.5);
}

/* Warna tombol secondary (abu-abu) */
button.btn-secondary {
  background-color: #7f8c8d;
  color: white;
  box-shadow: 0 6px 14px rgba(127, 140, 141, 0.45);
}

button.btn-secondary:hover {
  background-color: #626d70;
  box-shadow: 0 10px 20px rgba(98, 109, 112, 0.6);
  transform: translateY(-2px);
}

button.btn-secondary:active {
  transform: translateY(0);
  box-shadow: 0 6px 12px rgba(98, 109, 112, 0.5);
}

@media (max-width: 768px) {
  .form-row {
    flex-wrap: wrap;
  }
  .currency-wrapper {
    flex: 1 1 100%;
    min-width: auto;
    margin-bottom: 12px;
  }
  .form-row input[type="text"] {
    padding-left: 40px;
  }
}

@media (max-width: 480px) {
  .step-buttons {
    height: 24px;
    right: 6px;
  }
  .step-buttons button {
    width: 22px;
    height: 12px;
    font-size: 13px;
  }
}
  </style>
</head>
<body>

  <div class="container">
    <h2>Form Pengajuan Pinjaman</h2>
    <div id="form-rows-container">
      <div class="form-row">
        <input type="text" placeholder="Nama Admin" />
        <div class="currency-wrapper">
          <span class="currency-prefix">Rp</span>
          <input type="text" class="currency-input" placeholder="Jumlah Rupiah" />
          <div class="step-buttons">
            <button type="button" onclick="stepRupiah(this, 'up')">▲</button>
            <button type="button" onclick="stepRupiah(this, 'down')">▼</button>
          </div>
        </div>
        <div class="currency-wrapper">
          <span class="currency-prefix">$</span>
          <input type="text" class="currency-input" placeholder="Jumlah Dollar" />
          <div class="step-buttons">
            <button type="button" onclick="stepDollar(this, 'up')">▲</button>
            <button type="button" onclick="stepDollar(this, 'down')">▼</button>
          </div>
        </div>
      </div>
    </div>
    <button class="add-row" type="button">Tambah Baris</button>
    <button class="btn-secondary" type="button" onclick="goToCategory()">Kembali ke Menu Kategori</button>
    <button class="btn-primary" type="button" onclick="proceed()">Lanjut</button>
  </div>

<script>
const formRowsContainer = document.getElementById('form-rows-container');
const addRowBtn = document.querySelector('button.add-row');

addRowBtn.addEventListener('click', () => {
  const newRow = document.createElement('div');
  newRow.className = 'form-row';
  newRow.innerHTML = `
    <input type="text" placeholder="Nama Penerima Pinjaman" />
    <div class="currency-wrapper">
      <span class="currency-prefix">Rp</span>
      <input
        class="currency-input"
        type="text"
        placeholder="Minimal 500.000"
        oninput="formatRupiahInput(this)"
        onblur="checkRupiahInput(this)"
      />
      <div class="step-buttons">
        <button type="button" onclick="stepRupiah(this, 'up')">&#9650;</button>
        <button type="button" onclick="stepRupiah(this, 'down')">&#9660;</button>
      </div>
    </div>
    <div class="currency-wrapper">
      <span class="currency-prefix">$</span>
      <input
        class="currency-input"
        type="number"
        placeholder="Minimal 100"
        min="100"
        step="100"
        oninput="validateDollarInput(this)"
      />
      <div class="step-buttons">
        <button type="button" onclick="stepDollar(this, 'up')">&#9650;</button>
        <button type="button" onclick="stepDollar(this, 'down')">&#9660;</button>
      </div>
    </div>
  `;
  formRowsContainer.appendChild(newRow);
});

// Fungsi format Rupiah
function formatRupiahInput(input) {
  let val = input.value.replace(/\D/g, '');
  if (val === '') {
    input.value = '';
    input.style.border = '1px solid #ccc';
    input.title = '';
    return;
  }
  let num = parseInt(val, 10);
  if (num < 500000) {
    input.style.border = '2px solid red';
    input.title = 'Minimal Rp500.000';
  } else {
    input.style.border = '1px solid #ccc';
    input.title = '';
  }
  num = Math.floor(num / 100000) * 100000;
  input.value = formatRupiah(num);
}

function checkRupiahInput(input) {
  let val = input.value.replace(/\D/g, '');
  if (val === '') return;
  let num = parseInt(val, 10);
  if (num < 500000) {
    num = 500000;
  } else {
    num = Math.floor(num / 100000) * 100000;
  }
  input.value = formatRupiah(num);
  input.style.border = '1px solid #ccc';
  input.title = '';
}

function formatRupiah(angka) {
  return angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}

function validateDollarInput(input) {
  let val = input.value;
  if (val === '') {
    input.style.border = '1px solid #ccc';
    input.title = '';
    return;
  }
  let num = parseInt(val, 10);
  if (num < 100) {
    input.style.border = '2px solid red';
    input.title = 'Minimal $100';
  } else if (num % 100 !== 0) {
    input.style.border = '2px solid red';
    input.title = 'Harus kelipatan 100';
  } else {
    input.style.border = '1px solid #ccc';
    input.title = '';
  }
}

function stepRupiah(button, direction) {
  const input = button.closest('.currency-wrapper').querySelector('.currency-input');
  let val = input.value.replace(/\D/g, '');
  let num = val ? parseInt(val, 10) : 500000;
  if (direction === 'up') {
    num += 100000;
  } else {
    num -= 100000;
    if (num < 500000) num = 500000;
  }
  input.value = formatRupiah(num);
  input.style.border = '1px solid #ccc';
  input.title = '';
}

function stepDollar(button, direction) {
  const input = button.closest('.currency-wrapper').querySelector('.currency-input');
  let val = input.value;
  let num = val ? parseInt(val, 10) : 100;
  if (direction === 'up') {
    num += 100;
  } else {
    num -= 100;
    if (num < 100) num = 100;
  }
  input.value = num;
  validateDollarInput(input);
}

// Fungsi navigasi ke kategori
function goToCategory() {
  window.location.href = "Categori.html";
}

// Fungsi lanjut proses dan buka WhatsApp dengan pesan otomatis
function proceed() {
  const rows = document.querySelectorAll('#form-rows-container .form-row');
  if (rows.length === 0) {
    alert("Tidak ada data yang diisi.");
    return;
  }

  let pesan = "Permohonan ACC Pinjaman:\n\n";

  rows.forEach((row, index) => {
    const nama = row.querySelector('input[type="text"]').value.trim();
    const rupiahInput = row.querySelector('.currency-wrapper:nth-child(2) .currency-input');
    const dollarInput = row.querySelector('.currency-wrapper:nth-child(3) .currency-input');

    const rupiah = rupiahInput ? rupiahInput.value.trim() : '';
    const dollar = dollarInput ? dollarInput.value.trim() : '';

    if (nama || rupiah || dollar) {
      pesan += `Penerima ${index + 1}:\n`;
      pesan += `- Nama: ${nama || '-'}\n`;
      pesan += `- Pinjaman Rp: ${rupiah || '-'}\n`;
      pesan += `- Pinjaman $: ${dollar || '-'}\n\n`;
    }
  });

  if (pesan === "Permohonan ACC Pinjaman:\n\n") {
    alert("Mohon isi minimal satu data pinjaman.");
    return;
  }

  const nomorWA = "6281234567890"; // Ganti dengan nomor WhatsApp tujuan
  const pesanWA = encodeURIComponent(pesan);
  const urlWA = `https://wa.me/${nomorWA}?text=${pesanWA}`;

  window.open(urlWA, '_blank');
}
</script>
</body>
</html>
